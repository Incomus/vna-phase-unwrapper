<MainScreen>:
    md_bg_color : 1,1,1,1

    name: "myscreen"

    ScrollView:

        id:ScrollView

        scroll_type:['bars','content']
        do_scroll_x: True

        bar_width: 10  # This makes the scrollbar visible
        scroll_type: ['bars', 'content']  # Make both bar and content scroll
        bar_color: 	[0.3, 0.3, 0.3, 1]  # Dark gray scrollbar
        bar_inactive_color: [0.3, 0.3, 0.3, 1]   # Gray when inactive
        
        MDBoxLayout:
            orientation: 'vertical'
            spacing: dp(20)
            size_hint_x:None
            width: dp(200)
            
            MDCard:
                Label:
                    text: "Settings"
                    font_size: '20sp'
                    
                MDTextField:
                    id: min_jump_input
                    hint_text: "Minimum Jump"
                    text: root.min_jump_default
                    multiline: True
                    background_color: app.theme_cls.bg_normal
                    mode: "fill"
                    size_hint: None, None
                    size: dp(150), dp(40)
                    
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(40)
                    spacing: dp(10)
                    
                    MDCheckbox:
                        active: root.noise_enabled
                        on_active: root.noise_enabled = self.active

                    MDLabel:
                        text: "Enable Noise Selection"
                        valign: "center"
                
                MDRaisedButton:
                    text: "Select Scale Reference File"
                    on_release: root.select_file_dialog("Select Scale Reference File (.csv)", "scale_reference_path")
                    
                MDLabel:
                    id: scale_file_label
                    text: root.scale_reference_path
                    theme_text_color: "Hint"
                    halign: "left"

                MDExpansionTile:
                    text: "Optional Settings"
                    icon: "cog"

                    MDBoxLayout:
                        orientation: "vertical"
                        padding: dp(10)
                        spacing: dp(10)
                        adaptive_height: True

                        MDTextField:
                            id: n_steps_input
                            hint_text: "Number of Steps"
                            text: root.n_steps_default
                            multiline: False
                            background_color: app.theme_cls.bg_normal
                            mode: "fill"
                            size_hint: None, None
                            size: dp(150), dp(40)

                        MDTextField:
                            id: min_offset_input
                            hint_text: "Minimum Offset"
                            text: root.min_offset_default
                            multiline: False
                            background_color: app.theme_cls.bg_normal
                            mode: "fill"
                            size_hint: None, None
                            size: dp(150), dp(40)

                        MDTextField:
                            id: max_offset_input
                            hint_text: "Maximum Offset"
                            text: root.max_offset_default
                            multiline: False
                            background_color: app.theme_cls.bg_normal
                            mode: "fill"
                            size_hint: None, None
                            size: dp(150), dp(40)

                        MDTextField:
                            id: iterations_input
                            hint_text: "Iterations"
                            text: root.iterations_default
                            multiline: False
                            background_color: app.theme_cls.bg_normal
                            mode: "fill"
                            size_hint: None, None
                            size: dp(150), dp(40)
                
                MDRaisedButton:
                    text: "Select Data Folder"
                    on_release: root.select_file_dialog("Select Data Folder", "data_folder_path", "folder")
                    
                MDLabel:
                    id: data_folder_label
                    text: root.data_folder_path
                    theme_text_color: "Hint"
                    halign: "left"
